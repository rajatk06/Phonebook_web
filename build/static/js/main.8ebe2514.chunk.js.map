{"version":3,"sources":["apis/axios.js","components/newUserForm.js","components/SearchBar.js","components/Contacts.js","components/App.js","index.js"],"names":["localURL","window","location","protocol","hostname","URL","axios","create","baseURL","default_state","_id","name","email","phone","phn_err","undefined","email_err","modalOpen","curr_email","curr_phone","Input","state","onPhoneNumber","a","num","length","setState","includes","post","field","value","msg","data","err","onEmail","test","handleChange","e","removeTag","t","filter","tag","renderTags","map","i","Label","key","color","size","Icon","link","onClick","submit","user_data","_","omit","alert","put","props","resetType","render","Modal","trigger","Button","floated","primary","centered","open","onClose","closeIcon","Header","formType","Content","image","Form","Group","inline","label","placeholder","onChange","required","error","type","React","Component","getDerivedStateFromProps","formData","Search","SearchSubmit","setValue","style","width","icon","inverted","circular","Contacts","activeIndex","users","total","fetching","componentDidMount","fetchUsers","setFetch","componentDidUpdate","searchValue","page","val","trim","replace","path","Math","ceil","get","setTimeout","onUserDelete","delete","onUserEdit","editRqst","handleClick","titleProps","index","newIndex","pageChange","activePage","renderUser","user","Accordion","fluid","styled","Title","active","Segment","display","overflow","paddingBottom","List","no","ind","Item","content","marginLeft","position","this","height","Dimmer","Loader","Pagination","defaultActivePage","totalPages","onPageChange","App","fetch","margin","marginTop","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.8ebe2514.chunk.js","sourcesContent":["import axios from \"axios\";\n\n// eslint-disable-next-line\nconst apiURL = \"https://phonebook-server.herokuapp.com/\";\n// eslint-disable-next-line\nconst localURL =\n  window.location.protocol + \"//\" + window.location.hostname + \":\" + 3001;\n// eslint-disable-next-line\nconst URL = window.location.hostname === \"localhost\" ? localURL : apiURL;\n\nexport default axios.create({\n  baseURL: URL,\n});\n","import React from \"react\";\r\nimport axios from \"../apis/axios\"\r\nimport _ from \"lodash\"\r\nimport { Button, Icon, Form, Modal, Label } from \"semantic-ui-react\";\r\n// eslint-disable-next-line\r\nconst default_state = {\r\n  _id: \"\",\r\n  name: \"\",\r\n  email: [], phone: [],\r\n  phn_err: undefined, email_err: undefined,\r\n  modalOpen: false,\r\n  curr_email: \"\", curr_phone: \"\"\r\n}\r\nclass Input extends React.Component {\r\n  state = { ...default_state }\r\n\r\n  static getDerivedStateFromProps = (props, state) => {\r\n    if (props.formType === \"Edit\" && !state.modalOpen) return { ...props.formData, modalOpen: true }\r\n    return null;\r\n  }\r\n  onPhoneNumber = async () => {\r\n    const num = this.state.curr_phone;\r\n    if (num.length !== 10) {\r\n      this.setState({ phn_err: \"Phone No. invalid\" }); return;\r\n    }\r\n    if (this.state.phone.includes(num)) {\r\n      this.setState({ phn_err: \"Phone No. already registered\" }); return;\r\n    }\r\n    const msg = (await axios.post(\"/validate\", { field: \"phone\", value: num })).data\r\n\r\n    if (msg.err) this.setState({ phn_err: msg.err })\r\n    else this.setState({ phone: [...this.state.phone, num], curr_phone: \"\", phn_err: undefined });\r\n\r\n  };\r\n  onEmail = async () => {\r\n    const email = this.state.curr_email\r\n    // eslint-disable-next-line\r\n    if (!email.length || !/^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/.test(email)) {\r\n      this.setState({ email_err: \"Invalid E-mail\" }); return;\r\n    } if (this.state.email.includes(email)) {\r\n      this.setState({ email_err: \"E-mail already registered\" })\r\n      return;\r\n    }\r\n    const msg = (await axios.post(\"/validate\", { field: \"email\", value: email })).data\r\n\r\n    if (msg.err) this.setState({ email_err: msg.err })\r\n    else this.setState({ email: [...this.state.email, email], curr_email: \"\", email_err: undefined });\r\n  };\r\n  handleChange = (e, { name, value }) => this.setState({ [name]: value });\r\n  removeTag = (field, t) => {\r\n    this.setState({ [field]: this.state[field].filter(tag => tag !== t) });\r\n  };\r\n  renderTags = (field) => this.state[field].map((tag, i) => {\r\n    return (\r\n      <Label key={i} color=\"orange\" size=\"large\">\r\n        {tag}\r\n        <Icon\r\n          name=\"delete\"\r\n          link\r\n          onClick={() => {\r\n            this.removeTag(field, tag);\r\n          }}\r\n        />\r\n      </Label>\r\n    );\r\n  });\r\n  submit = async () => {\r\n    if (!this.state.phone.length) this.setState({ phn_err: \"Phone No. required\" })\r\n    else {\r\n      let user_data;\r\n      if (this.state._id === \"\") {\r\n        user_data = _.omit(this.state, [\"_id\", \"err\", \"curr_phone\", \"curr_email\", \"modalOpen\"]);\r\n        const msg = (await axios.post(\"/users\", user_data)).data\r\n        alert(msg.err ? msg.err : msg);\r\n      }\r\n      else {\r\n        user_data = _.omit(this.state, [\"err\", \"curr_phone\", \"curr_email\", \"modalOpen\"])\r\n        const msg = (await axios.put(\"/users\", user_data)).data\r\n        alert(msg.err ? msg.err : msg);\r\n      }\r\n      this.props.resetType(user_data);\r\n      this.setState({ ...default_state })\r\n    }\r\n  }\r\n  render = () => {\r\n    return (\r\n      <Modal\r\n        trigger={\r\n          <Button onClick={() => this.setState({ modalOpen: true })} floated=\"right\" primary>\r\n            Add User\r\n          </Button>\r\n        }\r\n        centered={false}\r\n        open={this.state.modalOpen}\r\n        onClose={() => {\r\n          this.props.resetType();\r\n          this.setState({ ...default_state })\r\n        }}\r\n        closeIcon\r\n      >\r\n        <Modal.Header>{this.props.formType} User</Modal.Header>\r\n        <Modal.Content image>\r\n          <Form>\r\n            <Form.Group inline>\r\n              <Form.Input label=\"Name\" placeholder=\"Name\"\r\n                name=\"name\"\r\n                value={this.state.name}\r\n                onChange={this.handleChange}\r\n                required />\r\n            </Form.Group>\r\n            <Form.Group inline>\r\n              <Form.Input\r\n                label=\"Phone Number\"\r\n                placeholder=\"Phone Number\"\r\n                name=\"curr_phone\"\r\n                value={this.state.curr_phone}\r\n                onChange={this.handleChange}\r\n                error={this.state.phn_err}\r\n              />\r\n              <Icon\r\n                name=\"add\"\r\n                color=\"green\"\r\n                size=\"large\"\r\n                onClick={this.onPhoneNumber}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group> {this.renderTags(\"phone\")}</Form.Group>\r\n            <br />\r\n            <Form.Group inline>\r\n              <Form.Input\r\n                label=\"E-mail\"\r\n                placeholder=\"E-mail\"\r\n                name=\"curr_email\"\r\n                value={this.state.curr_email}\r\n                onChange={this.handleChange}\r\n                error={this.state.email_err}\r\n              />\r\n              <Icon\r\n                name=\"add\"\r\n                color=\"green\"\r\n                size=\"large\"\r\n                onClick={this.onEmail}\r\n              />\r\n            </Form.Group>\r\n            <Form.Group> {this.renderTags(\"email\")}</Form.Group>\r\n            <br />\r\n            <Form.Button type=\"submit\" onClick={this.submit} primary>\r\n              Submit\r\n            </Form.Button>\r\n          </Form>\r\n        </Modal.Content>\r\n      </Modal>\r\n    );\r\n  };\r\n}\r\n\r\nexport default Input;\r\n","import React from \"react\";\r\nimport { Input, Icon } from \"semantic-ui-react\";\r\n\r\nclass Search extends React.Component {\r\n  state = { value: \"\" }\r\n  SearchSubmit = async () => {\r\n    this.props.setValue(this.state.value)\r\n  }\r\n  render = () => {\r\n    return (\r\n      <Input\r\n        style={{ width: \"40%\" }}\r\n        name=\"value\"\r\n        onChange={(e, { name, value }) => this.setState({ [name]: value })}\r\n        icon={<Icon name=\"search\" onClick={this.SearchSubmit} inverted circular link />}\r\n        placeholder=\"Search...\"\r\n      />\r\n    );\r\n  };\r\n}\r\n\r\nexport default Search;\r\n","import React from \"react\";\r\nimport axios from \"../apis/axios\";\r\nimport {\r\n  List,\r\n  Segment,\r\n  Icon,\r\n  Accordion,\r\n  Pagination,\r\n  Dimmer,\r\n  Loader\r\n} from \"semantic-ui-react\";\r\nconst LIMIT = 4;\r\nclass Contacts extends React.Component {\r\n  state = {\r\n    activeIndex: 0,\r\n    users: [],\r\n    total: 0,\r\n    value: \"\",\r\n    fetching: false\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.fetchUsers(0);\r\n    this.props.setFetch(this.fetchUsers);\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    if (this.props.searchValue !== this.state.value) {\r\n      // eslint-disable-next-line\r\n      this.state.value = this.props.searchValue;\r\n      this.fetchUsers(0);\r\n    }\r\n  };\r\n\r\n  fetchUsers = async (page = 0) => {\r\n    this.setState({ fetching: true });\r\n    let val = this.state.value;\r\n    val = val.trim();\r\n    val = val.replace(/[/^ *$/]{2,}/g, \" \");\r\n    const path =\r\n      val && val.length\r\n        ? `/users?page=${Math.ceil(page)}&value=${val}`\r\n        : `/users?page=${Math.ceil(page)}`;\r\n    const { users, total } = (await axios.get(path)).data;\r\n    if (users)\r\n      setTimeout(() => {\r\n        this.setState({ users, total, fetching: false });\r\n      }, 300);\r\n  };\r\n  onUserDelete = async (_id, i) => {\r\n    const msg = (await axios.delete(`/users?_id=${_id}`)).data;\r\n    this.fetchUsers((i + 1) / LIMIT);\r\n    alert(msg.err ? msg.err : msg);\r\n  };\r\n  onUserEdit = (i) => {\r\n    this.props.editRqst(\"Edit\", { ...this.state.users[i] });\r\n  };\r\n\r\n  handleClick = (e, titleProps) => {\r\n    const { index } = titleProps;\r\n    const { activeIndex } = this.state;\r\n    const newIndex = activeIndex === index ? -1 : index;\r\n\r\n    this.setState({ activeIndex: newIndex });\r\n  };\r\n  pageChange = (e, { activePage }) => {\r\n    this.fetchUsers(activePage - 1);\r\n  };\r\n  renderUser = (user, i) => {\r\n    const { activeIndex } = this.state;\r\n    return (\r\n      <Accordion key={user._id} fluid styled>\r\n        <Accordion.Title\r\n          active={activeIndex === i}\r\n          index={i}\r\n          onClick={this.handleClick}\r\n        >\r\n          <Icon name=\"dropdown\" />\r\n          {user.name}\r\n        </Accordion.Title>\r\n        <Accordion.Content active={activeIndex === i}>\r\n          <Segment>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                overflow: \"auto\",\r\n                paddingBottom: \"1rem\"\r\n              }}\r\n            >\r\n              <List>\r\n                {user.phone.map((no, ind) => (\r\n                  <List.Item icon=\"phone\" key={ind} content={no} />\r\n                ))}\r\n              </List>\r\n              <div style={{ marginLeft: \"15%\" }}>\r\n                <List>\r\n                  {user.email.map((email, ind) => (\r\n                    <List.Item icon=\"mail\" key={ind} content={email} />\r\n                  ))}\r\n                </List>\r\n              </div>\r\n              <div style={{ position: \"relative\", width: \"100%\" }}></div>\r\n              <div style={{ display: \"flex\" }}>\r\n                <Icon\r\n                  name=\"delete\"\r\n                  color=\"red\"\r\n                  size=\"big\"\r\n                  onClick={() => this.onUserDelete(user._id, i)}\r\n                />\r\n                <Icon\r\n                  name=\"edit\"\r\n                  color=\"green\"\r\n                  size=\"big\"\r\n                  onClick={() => this.onUserEdit(i)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </Segment>\r\n        </Accordion.Content>\r\n      </Accordion>\r\n    );\r\n  };\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.state.fetching ? (\r\n          <Segment style={{ height: \"25vh\" }}>\r\n            <Dimmer active inverted>\r\n              <Loader size=\"large\">Loading</Loader>\r\n            </Dimmer>\r\n          </Segment>\r\n        ) : (\r\n          this.state.users.map((user, i) => this.renderUser(user, i))\r\n        )}\r\n        <br />\r\n        {this.state.total > LIMIT ? (\r\n          <center>\r\n            <Pagination\r\n              defaultActivePage={1}\r\n              totalPages={this.state.total / LIMIT}\r\n              onPageChange={this.pageChange}\r\n            />\r\n          </center>\r\n        ) : null}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Contacts;\r\n","import React from \"react\";\nimport { Segment } from \"semantic-ui-react\";\n\nimport NewForm from \"./newUserForm\";\nimport Search from \"./SearchBar\";\nimport Contacts from \"./Contacts\";\n\nclass App extends React.Component {\n  state = { value: \"\", formType: \"Add\", formData: {}, fetch: () => {} };\n  render = () => {\n    return (\n      <div style={{ margin: \"0 15vw 0 15vw\" }}>\n        <Segment style={{ marginTop: \"2rem\" }}>\n          <Search setValue={(value) => this.setState({ value })} />\n          <NewForm\n            formType={this.state.formType}\n            formData={this.state.formData}\n            resetType={(user) => {\n              this.setState({ formType: \"Add\", formData: user });\n              this.state.fetch();\n            }}\n          />\n        </Segment>\n        <br />\n        <Contacts\n          searchValue={this.state.value}\n          setFetch={(fetch) => this.setState({ fetch })}\n          editRqst={(formType, formData) =>\n            this.setState({ formType, formData })\n          }\n        />\n      </div>\n    );\n  };\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}